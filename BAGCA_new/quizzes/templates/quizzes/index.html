<head>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.js"></script>
</head>

{% load embed_video_tags %}
        {% video 'http://www.youtube.com/watch?v=jeIQ2fy_eOQ' 'small' %}
{% if latest_question_list %}
        {% csrf_token %}
        <ul>
            {% for question in latest_question_list %}
                <li><a href="{% url 'quizzes:detail' question.id %}">{{ question.question_text }}</a></li>
            {% endfor %}
        </ul>
{% else %}
        <p>No questions are available.</p>
{% endif %}

<div>
    <br><hr><br>
    <h2>Send test email: </h2>
    <form action="email/" method="POST" id="email-form">
        <div>
            {% csrf_token %}
            <p>Email: <input type="text" name="address_field" id="address_field">
            <input type="submit" value="Post"></p>
        </div>
    </form>
</div>



<script>
    $('#email-form').on('submit', function(event) {
        var addr = $('#address_field').val();
        var regex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
 
        if(regex.test(addr)) { 
            $.ajax({
                url : "email/",
                type : "GET",
                data : { address_field : $('#address_field').val() }
            });
        } else {
            alert("Error: You have not entered a valid email address");
        }
    });
</script>
